### 数据库的三个范式
+ 第一范式：每个字段都是原子性的，不能在继续分解。
+ 第二范式：表必须有主键，非主属性必须完全依赖而不能部分依赖主键
+ 第三范式：非主属性必须直接依赖到主键，不能间接的依赖主键
### 数据库分库分表
为什么分库分表：
1. 业务拆分，复杂系统变简单 
2. 数据隔离，将核心业务和非核心业务区分开

分布式ID生成服务：
1.使用Twitter的snowflake,生成一个（完全无序，趋势递增，单调递增）具体业务具体分析

join查询的问题
1. 将join的几个表都改成单表查询，使用代码进行拼装。
2. 提前将join结果写好写到一个表中
3. 使用搜索引擎，将数据库数据导入到ES中进行查询

### B+树（逻辑结构）
1. 叶子节点上所有索引值从小到大顺序排序，双向链表，每一个key执行一条记录
2. 所有的非叶子节点的数据都是荣誉的，每个节点存储的叶子节点的最小值，同层也是双显链表

### 基于B+树的索引可以实现
1. 范围查询：查询范围最大值和最小值，然后顺序遍历
2. 排序：索引天然支持排序，
3. 分页：大偏移量的分页，先查出将offset=1000的位置换算成某个userId

### B+树（物理结构）
1. 每个page的大小16kb，

### 思考
1. 为什么按照主键的递增顺序插入记录？为了避免page split问题

### 非主键索引
1. 结构与主键索引相类似，但是在叶子节点上存储的不是记录的指针而是主键值。
先通过非主键索引找到主键值，在通过主键索引找到记录。所以非主键索引查询两个B+树。

### 事务与锁

