# 图灵听课笔记

## 一、MYSQL

### 1.1 聚集索引与非聚集索引

聚集索引叶子节点存储所有数据，无需回表

### 1.2 为什么要建立一个自增的整型主键

+ 如果未指定主键，数据库会寻找一个数据都不相同的列来创建索引，否则创建一个隐藏的自增列

+ 整形相对字符串占用更小的空间，
+ 避免page split问题

### hash索引的弊端

+ 查找等值速度快，无法进行范围查询

### innodb的非主键索引，为什么叶子节点存储主键id？

+ 叶子节点存储的不是数据，而是主键id
  + 减少插入数据索引维护的复杂度
  + 减少磁盘空间占用

### 联合索引，为什么要最左前缀原则

> 多个字段共同组织成一个索引

![image-20211101231509432](../image/image-20211101231509432.png)

+ 索引创建的时候会按照指定的列顺序将数据排好序，先按照name排序，再按照age

+ 如果不先使用name搜索，则age实际是无序的（只有在name相等的情况下，age才是排好序的）

  这就是为什么说索引是排好序的数据结构

### EXPLAIN语句

+ id：sql执行的顺序
+ select_type：

### MYSQL架构

<img src="../image/image-20211104193058629.png" alt="image-20211104193058629" style="zoom:67%;" />

### 问题排查语句

+ 查看当前执行的线程

> SHOW PROCESSLIST;

<img src="../image/image-20211104194335635.png" alt="image-20211104194335635" style="zoom:67%;" />

